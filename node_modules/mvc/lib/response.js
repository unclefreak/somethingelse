var Response = function(socket){
	this._initResponse(socket);
};

Response.prototype = {
	_initResponse: function(socket){
		this.socket = socket;
		this.statusCode = 200;
		this.body = {};
		this.token = "";
	},

	write: function(data, statusCode){
		if(statusCode !== undefined){
			this.statusCode = statusCode;
		}
		var result = {
			status: this.statusCode,
			body: data
		};
		if(this.token && this.token.trim() != ""){
			result.token = this.token;
		}

		this.socket.write(JSON.stringify(result));
	},

	setStatus: function(value){
		this.statusCode = value;
	},

	setToken: function(value){
		this.token = value;	
	},

	end: function(){
		this.socket.end();
	}
};

module.exports = Response;