var oo = require('./utils/oo'),
    MysqlDatabase = require('./mysql_database'),
    Config = require('./config'),
	EventEmitter = require('event').EventEmitter;


var AbstractModel = function(options){
    this._initAbstractModel(options);
};

AbstractModel.prototype = {
    _initAbstractModel: function(options){
	    EventEmitter.call(this);
        this.options = oo.mix({
        }, this.options);

        this.options = oo.mix(this.options, options);
        this.db = AbstractModel.getDb();
    }
};

AbstractModel.getDb = function(){
	if(!this.db){
        this.db = new MysqlDatabase(Config.db);
	}

	return this.db;
}


oo.extend(AbstractModel, EventEmitter);
module.exports = AbstractModel;