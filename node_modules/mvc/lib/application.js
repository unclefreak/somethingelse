var bootstrap = require('./bootstrap');
var Config = require('./config');
var net = require('net');

var router = require('./router');

var Application = {
	init: function(config){
		Config.addConfig(config);
		this.config = Config;
		router.addRoutes(Config.routes);
		return this;
	},

	run: function(){
 		var ds = net.Server(function(socket){
	    	bootstrap.run(socket, Config);
		});
		ds.listen(this.config.serverinfo.port);
	    console.log('Server running... listening port:' + this.config.serverinfo.port);
	}

};
module.exports = Application;